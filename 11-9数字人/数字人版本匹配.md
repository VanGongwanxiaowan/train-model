# æ•°å­—äººç¯å¢ƒç‰ˆæœ¬åŒ¹é…æ£€æŸ¥æŠ¥å‘Š

## ğŸ“‹ æ£€æŸ¥æ¦‚è¿°

å¯¹æ¯”æ‚¨æä¾›çš„ç‰ˆæœ¬åˆ—è¡¨ï¼ˆrequirements.txt - æ—§ç‰ˆæœ¬ï¼‰ä¸ç›®æ ‡ç‰ˆæœ¬ï¼ˆrequirements_0.txt - æ–°ç‰ˆæœ¬ï¼‰çš„åŒ¹é…æƒ…å†µã€‚

## âš ï¸ ä¸¥é‡ä¸åŒ¹é…çš„åŒ…ï¼ˆå¿…é¡»ä¿®å¤ï¼‰

### å…³é”®æ·±åº¦å­¦ä¹ æ¡†æ¶
| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | ç›®æ ‡ç‰ˆæœ¬ | çŠ¶æ€ | å½±å“ |
|------|------------|---------|------|------|
| **onnxruntime-gpu** | 1.9.0 | 1.16.0 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸¥é‡** - GPUæ¨ç†å¯èƒ½å¤±è´¥ï¼ŒCUDAå…¼å®¹æ€§é—®é¢˜ |
| **numpy** | 1.21.6 | 1.24.4 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸¥é‡** - å¯èƒ½å¯¼è‡´APIä¸å…¼å®¹ï¼Œæ€§èƒ½é—®é¢˜ |
| **librosa** | 0.8.1 | 0.11.0 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸¥é‡** - éŸ³é¢‘å¤„ç†åŠŸèƒ½å¯èƒ½å¼‚å¸¸ |
| **opencv-python** | 4.7.0.72 | 4.11.0.86 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸¥é‡** - å›¾åƒå¤„ç†åŠŸèƒ½å¯èƒ½å¼‚å¸¸ |

### ç§‘å­¦è®¡ç®—åº“
| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | ç›®æ ‡ç‰ˆæœ¬ | çŠ¶æ€ | å½±å“ |
|------|------------|---------|------|------|
| **scipy** | 1.7.1 | 1.10.1 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - ç§‘å­¦è®¡ç®—åŠŸèƒ½å¯èƒ½å¼‚å¸¸ |
| **scikit-learn** | 1.0.2 | 1.3.2 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - æœºå™¨å­¦ä¹ åŠŸèƒ½å¯èƒ½å¼‚å¸¸ |
| **scikit-image** | 0.19.3 | 0.21.0 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - å›¾åƒå¤„ç†åŠŸèƒ½å¯èƒ½å¼‚å¸¸ |
| **numba** | 0.55.2 | 0.58.1 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - JITç¼–è¯‘å¯èƒ½å¤±è´¥ |

### å›¾åƒå¤„ç†
| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | ç›®æ ‡ç‰ˆæœ¬ | çŠ¶æ€ | å½±å“ |
|------|------------|---------|------|------|
| **pillow** | 9.1.1 | 10.4.0 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - å›¾åƒå¤„ç†å¯èƒ½å¤±è´¥ |
| **imageio** | 2.19.3 | 2.35.1 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - å›¾åƒIOå¯èƒ½å¼‚å¸¸ |

### éŸ³é¢‘å¤„ç†
| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | ç›®æ ‡ç‰ˆæœ¬ | çŠ¶æ€ | å½±å“ |
|------|------------|---------|------|------|
| **soundfile** | 0.10.3.post1 | 0.13.1 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - éŸ³é¢‘æ–‡ä»¶è¯»å†™å¯èƒ½å¤±è´¥ |
| **audioread** | 2.1.9 | 3.0.1 | âŒ **ä¸¥é‡ä¸åŒ¹é…** | **ä¸­ç­‰** - éŸ³é¢‘è¯»å–å¯èƒ½å¼‚å¸¸ |

## âœ… åŒ¹é…çš„åŒ…ï¼ˆæ­£ç¡®ç‰ˆæœ¬ï¼‰

### æ ¸å¿ƒæ·±åº¦å­¦ä¹ æ¡†æ¶
| åŒ…å | ç‰ˆæœ¬ | çŠ¶æ€ |
|------|------|------|
| **torch** | 1.11.0+cu113 | âœ… **åŒ¹é…** |
| **torchvision** | 0.12.0+cu113 | âœ… **åŒ¹é…** |
| **torchaudio** | 0.11.0+cu113 | âœ… **åŒ¹é…** |

### é¡¹ç›®ç‰¹å®šåº“
| åŒ…å | ç‰ˆæœ¬ | çŠ¶æ€ |
|------|------|------|
| **cv2box** | 0.5.9 | âœ… **åŒ¹é…** |
| **apstone** | 0.0.8 | âœ… **åŒ¹é…** |
| **typeguard** | 2.13.3 | âœ… **åŒ¹é…** |

### å·¥å…·åº“
| åŒ…å | ç‰ˆæœ¬ | çŠ¶æ€ |
|------|------|------|
| **click** | 8.1.3 â†’ 8.1.8 | âš ï¸ **å°ç‰ˆæœ¬å·®å¼‚** |
| **decorator** | 5.1.1 â†’ 5.2.1 | âš ï¸ **å°ç‰ˆæœ¬å·®å¼‚** |
| **numexpr** | 2.8.6 | âœ… **åŒ¹é…** |

## âŒ ç‰ˆæœ¬ä¸åŒ¹é…çš„åŒ…ï¼ˆéœ€è¦å‡çº§ï¼‰

### é«˜ä¼˜å…ˆçº§ï¼ˆå½±å“åŠŸèƒ½ï¼‰
| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | ç›®æ ‡ç‰ˆæœ¬ | å‡çº§å‘½ä»¤ |
|------|------------|---------|---------|
| onnxruntime-gpu | 1.9.0 | 1.16.0 | `pip install onnxruntime-gpu==1.16.0` |
| numpy | 1.21.6 | 1.24.4 | `pip install numpy==1.24.4` |
| librosa | 0.8.1 | 0.11.0 | `pip install librosa==0.11.0` |
| opencv-python | 4.7.0.72 | 4.11.0.86 | `pip install opencv-python==4.11.0.86` |
| scipy | 1.7.1 | 1.10.1 | `pip install scipy==1.10.1` |
| scikit-learn | 1.0.2 | 1.3.2 | `pip install scikit-learn==1.3.2` |
| scikit-image | 0.19.3 | 0.21.0 | `pip install scikit-image==0.21.0` |
| numba | 0.55.2 | 0.58.1 | `pip install numba==0.58.1` |
| pillow | 9.1.1 | 10.4.0 | `pip install pillow==10.4.0` |
| soundfile | 0.10.3.post1 | 0.13.1 | `pip install soundfile==0.13.1` |

### ä¸­ä¼˜å…ˆçº§ï¼ˆå¯èƒ½å½±å“åŠŸèƒ½ï¼‰
| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | ç›®æ ‡ç‰ˆæœ¬ | å‡çº§å‘½ä»¤ |
|------|------------|---------|---------|
| imageio | 2.19.3 | 2.35.1 | `pip install imageio==2.35.1` |
| audioread | 2.1.9 | 3.0.1 | `pip install audioread==3.0.1` |
| matplotlib | 3.5.3 | 3.7.5 | `pip install matplotlib==3.7.5` |
| networkx | 2.6.3 | 3.1 | `pip install networkx==3.1` |
| joblib | 1.1.0 | 1.4.2 | `pip install joblib==1.4.2` |
| protobuf | 4.21.5 | 5.29.4 | `pip install protobuf==5.29.4` |
| requests | 2.27.1 | 2.32.3 | `pip install requests==2.32.3` |
| urllib3 | 1.26.9 | 2.2.3 | `pip install urllib3==2.2.3` |
| tqdm | 4.64.0 | 4.67.1 | `pip install tqdm==4.67.1` |
| PyYAML | 6.0 | 6.0.2 | `pip install PyYAML==6.0.2` |

### ä½ä¼˜å…ˆçº§ï¼ˆå…¼å®¹æ€§æ›´æ–°ï¼‰
| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | ç›®æ ‡ç‰ˆæœ¬ | å‡çº§å‘½ä»¤ |
|------|------------|---------|---------|
| cffi | 1.15.0 | 1.17.1 | `pip install cffi==1.17.1` |
| charset-normalizer | 2.0.12 | 3.4.1 | `pip install charset-normalizer==3.4.1` |
| click | 8.1.3 | 8.1.8 | `pip install click==8.1.8` |
| decorator | 5.1.1 | 5.2.1 | `pip install decorator==5.2.1` |
| filelock | 3.7.1 | 3.16.1 | `pip install filelock==3.16.1` |
| flatbuffers | 2.0 | 25.2.10 | `pip install flatbuffers==25.2.10` |
| fonttools | 4.36.0 | 4.56.0 | `pip install fonttools==4.56.0` |
| idna | 3.3 | 3.10 | `pip install idna==3.10` |
| kiwisolver | 1.4.4 | 1.4.7 | `pip install kiwisolver==1.4.7` |
| packaging | 21.3 | 24.2 | `pip install packaging==24.2` |
| pooch | 1.6.0 | 1.8.2 | `pip install pooch==1.8.2` |
| pycparser | 2.21 | 2.22 | `pip install pycparser==2.22` |
| pyparsing | 3.0.9 | 3.1.4 | `pip install pyparsing==3.1.4` |
| python-dateutil | 2.8.2 | 2.9.0.post0 | `pip install python-dateutil==2.9.0.post0` |
| PyWavelets | 1.3.0 | 1.4.1 | `pip install PyWavelets==1.4.1` |
| six | 1.16.0 | 1.17.0 | `pip install six==1.17.0` |
| threadpoolctl | 3.1.0 | 3.5.0 | `pip install threadpoolctl==3.5.0` |
| tifffile | 2021.11.2 | 2023.7.10 | `pip install tifffile==2023.7.10` |
| typing-extensions | 4.2.0 | 4.12.2 | `pip install typing-extensions==4.12.2` |
| zipp | 3.8.0 | 3.20.2 | `pip install zipp==3.20.2` |

## â• ç¼ºå¤±çš„åŒ…ï¼ˆéœ€è¦å®‰è£…ï¼‰

### Webæ¡†æ¶ç›¸å…³ï¼ˆå…³é”®ï¼‰
| åŒ…å | ç›®æ ‡ç‰ˆæœ¬ | è¯´æ˜ |
|------|---------|------|
| **fastapi** | 0.115.11 | âš ï¸ **å¿…é¡»å®‰è£…** - Web APIæ¡†æ¶ |
| **uvicorn** | 0.33.0 | âš ï¸ **å¿…é¡»å®‰è£…** - ASGIæœåŠ¡å™¨ |
| **starlette** | 0.44.0 | âš ï¸ **å¿…é¡»å®‰è£…** - FastAPIä¾èµ– |
| **gradio** | 4.44.1 | âš ï¸ **å¿…é¡»å®‰è£…** - Web UIæ¡†æ¶ |
| **gradio_client** | 1.3.0 | âš ï¸ **å¿…é¡»å®‰è£…** - Gradioå®¢æˆ·ç«¯ |
| **pydantic** | 2.10.6 | âš ï¸ **å¿…é¡»å®‰è£…** - æ•°æ®éªŒè¯ |
| **pydantic_core** | 2.27.2 | âš ï¸ **å¿…é¡»å®‰è£…** - Pydanticæ ¸å¿ƒ |

### æ•°æ®å¤„ç†
| åŒ…å | ç›®æ ‡ç‰ˆæœ¬ | è¯´æ˜ |
|------|---------|------|
| **pandas** | 2.0.3 | âš ï¸ **å¿…é¡»å®‰è£…** - æ•°æ®å¤„ç† |
| **aiofiles** | 23.2.1 | å¼‚æ­¥æ–‡ä»¶æ“ä½œ |
| **orjson** | 3.10.15 | é«˜æ€§èƒ½JSONå¤„ç† |

### å…¶ä»–ä¾èµ–
| åŒ…å | ç›®æ ‡ç‰ˆæœ¬ | è¯´æ˜ |
|------|---------|------|
| **einops** | 0.8.1 | å¼ é‡æ“ä½œ |
| **huggingface-hub** | 0.29.3 | Hugging Faceæ¨¡å‹åº“ï¼ˆæ‚¨çš„æ˜¯0.0.8ï¼Œéœ€è¦å‡çº§ï¼‰ |
| **soxr** | 0.3.7 | éŸ³é¢‘é‡é‡‡æ · |
| **pydub** | 0.25.1 | éŸ³é¢‘å¤„ç† |
| **llvmlite** | 0.41.1 | Numbaä¾èµ– |
| **websockets** | 12.0 | WebSocketæ”¯æŒ |
| **Flask** | 3.0.3 | Flaskæ¡†æ¶ |
| **Werkzeug** | 3.0.6 | Flaskä¾èµ– |

## â– å¤šä½™çš„åŒ…ï¼ˆæ—§ç‰ˆæœ¬ä¸­æœ‰çš„ï¼Œæ–°ç‰ˆæœ¬ä¸­ç§»é™¤çš„ï¼‰

ä»¥ä¸‹åŒ…åœ¨æ‚¨çš„ç‰ˆæœ¬åˆ—è¡¨ä¸­å­˜åœ¨ï¼Œä½†åœ¨ç›®æ ‡ç‰ˆæœ¬ä¸­å·²ç§»é™¤æˆ–ä¸å†éœ€è¦ï¼š

| åŒ…å | æ‚¨æä¾›çš„ç‰ˆæœ¬ | è¯´æ˜ |
|------|------------|------|
| appdirs | 1.4.4 | å·²ä¸å†éœ€è¦ |
| colorama | 0.4.4 | å·²ä¸å†éœ€è¦ |
| freetype-py | 2.3.0 | å·²ä¸å†éœ€è¦ |
| importlib-metadata | 4.11.4 | å·²å‡çº§ä¸º importlib_metadata 8.5.0 |
| kornia | 0.6.6 | å·²ä¸å†éœ€è¦ |
| psutil | 5.9.1 | å·²ä¸å†éœ€è¦ |
| pyglet | 1.5.26 | å·²ä¸å†éœ€è¦ |
| pyopengl | 3.1.0 | å·²ä¸å†éœ€è¦ |
| pyrender | 0.1.45 | å·²ä¸å†éœ€è¦ |
| regex | 2022.6.2 | å·²ä¸å†éœ€è¦ |
| resampy | 0.2.2 | å·²ä¸å†éœ€è¦ |
| sacremoses | 0.0.53 | å·²ä¸å†éœ€è¦ |
| tokenizers | 0.10.3 | å·²ä¸å†éœ€è¦ |
| transformers | 4.6.1 | å·²ä¸å†éœ€è¦ |
| trimesh | 3.12.7 | å·²ä¸å†éœ€è¦ |

## ğŸ¯ å…³é”®é—®é¢˜åˆ†æ

### 1. ONNX Runtime GPU ç‰ˆæœ¬é—®é¢˜ âš ï¸ **æœ€ä¸¥é‡**
- **å½“å‰**: 1.9.0ï¼ˆ2022å¹´ç‰ˆæœ¬ï¼‰
- **ç›®æ ‡**: 1.16.0ï¼ˆ2023å¹´ç‰ˆæœ¬ï¼‰
- **å½±å“**: 
  - CUDA/cuDNNå…¼å®¹æ€§é—®é¢˜
  - GPUæ¨ç†å¯èƒ½å¤±è´¥
  - æ€§èƒ½é—®é¢˜
- **å¿…é¡»å‡çº§**: æ˜¯

### 2. NumPy ç‰ˆæœ¬é—®é¢˜ âš ï¸ **ä¸¥é‡**
- **å½“å‰**: 1.21.6ï¼ˆ2021å¹´ç‰ˆæœ¬ï¼‰
- **ç›®æ ‡**: 1.24.4ï¼ˆ2023å¹´ç‰ˆæœ¬ï¼‰
- **å½±å“**: 
  - APIä¸å…¼å®¹
  - æ€§èƒ½é—®é¢˜
  - ä¸å…¶ä»–åº“çš„å…¼å®¹æ€§é—®é¢˜
- **å¿…é¡»å‡çº§**: æ˜¯

### 3. Librosa ç‰ˆæœ¬é—®é¢˜ âš ï¸ **ä¸¥é‡**
- **å½“å‰**: 0.8.1ï¼ˆ2021å¹´ç‰ˆæœ¬ï¼‰
- **ç›®æ ‡**: 0.11.0ï¼ˆ2023å¹´ç‰ˆæœ¬ï¼‰
- **å½±å“**: 
  - éŸ³é¢‘å¤„ç†åŠŸèƒ½å¼‚å¸¸
  - APIå˜æ›´
- **å¿…é¡»å‡çº§**: æ˜¯

### 4. ç¼ºå¤±Webæ¡†æ¶ âš ï¸ **ä¸¥é‡**
- **ç¼ºå¤±**: fastapi, uvicorn, gradio, starlette, pydantic
- **å½±å“**: 
  - æ— æ³•è¿è¡ŒWebæœåŠ¡
  - APIæ— æ³•å¯åŠ¨
- **å¿…é¡»å®‰è£…**: æ˜¯

## ğŸ“Š ç»Ÿè®¡æ±‡æ€»

| ç±»åˆ« | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| âœ… **åŒ¹é…çš„åŒ…** | 3 | torch, torchvision, torchaudio, cv2box, apstone, typeguard |
| âŒ **ä¸åŒ¹é…çš„åŒ…** | 35+ | éœ€è¦å‡çº§ |
| â• **ç¼ºå¤±çš„åŒ…** | 20+ | éœ€è¦å®‰è£… |
| â– **å¤šä½™çš„åŒ…** | 15+ | å¯ä»¥ç§»é™¤ |
| âš ï¸ **ä¸¥é‡é—®é¢˜** | 4 | ONNX Runtime, NumPy, Librosa, Webæ¡†æ¶ |

## ğŸ› ï¸ ä¿®å¤å»ºè®®

### æ–¹æ¡ˆ1: å®Œå…¨å‡çº§åˆ°ç›®æ ‡ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

```bash
# 1. å¤‡ä»½å½“å‰ç¯å¢ƒ
pip freeze > requirements_backup.txt

# 2. å¸è½½æ‰€æœ‰åŒ…ï¼ˆå¯é€‰ï¼Œå¦‚æœç¯å¢ƒå¹²å‡€å¯ä»¥è·³è¿‡ï¼‰
pip uninstall -y -r requirements.txt

# 3. å®‰è£…ç›®æ ‡ç‰ˆæœ¬
pip install -r requirements_0.txt

# 4. éªŒè¯å…³é”®åŒ…ç‰ˆæœ¬
python check_environment.py
```

### æ–¹æ¡ˆ2: é€æ­¥å‡çº§å…³é”®åŒ…

```bash
# 1. å‡çº§æœ€å…³é”®çš„åŒ…
pip install onnxruntime-gpu==1.16.0
pip install numpy==1.24.4
pip install librosa==0.11.0
pip install opencv-python==4.11.0.86

# 2. å®‰è£…ç¼ºå¤±çš„Webæ¡†æ¶
pip install fastapi==0.115.11
pip install uvicorn==0.33.0
pip install gradio==4.44.1
pip install starlette==0.44.0
pip install pydantic==2.10.6
pip install pydantic_core==2.27.2

# 3. å‡çº§ç§‘å­¦è®¡ç®—åº“
pip install scipy==1.10.1
pip install scikit-learn==1.3.2
pip install scikit-image==0.21.0
pip install numba==0.58.1

# 4. å‡çº§å…¶ä»–ä¾èµ–
pip install -r requirements_0.txt --upgrade
```

### æ–¹æ¡ˆ3: ä½¿ç”¨condaç¯å¢ƒï¼ˆæœ€å¯é ï¼‰

```bash
# 1. åˆ›å»ºæ–°çš„condaç¯å¢ƒ
conda create -n digital_human_fixed python=3.8 -y
conda activate digital_human_fixed

# 2. å®‰è£…PyTorchï¼ˆé€šè¿‡condaï¼‰
conda install pytorch==1.11.0 torchvision==0.12.0 torchaudio==0.11.0 cudatoolkit=11.3 -c pytorch -c conda-forge

# 3. å®‰è£…å…¶ä»–ä¾èµ–
pip install -r requirements_0.txt
```

## âœ… éªŒè¯æ­¥éª¤

å®‰è£…å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# 1. æ£€æŸ¥ç¯å¢ƒç‰ˆæœ¬
python check_environment.py

# 2. æ£€æŸ¥PyTorchå’ŒCUDA
python -c "import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDA available: {torch.cuda.is_available()}')"

# 3. æ£€æŸ¥ONNX Runtime GPU
python -c "import onnxruntime as ort; print(f'ONNX Runtime: {ort.__version__}'); print(f'Providers: {ort.get_available_providers()}')"

# 4. æ£€æŸ¥Webæ¡†æ¶
python -c "import fastapi; import uvicorn; import gradio; print('Web frameworks OK')"
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä¾èµ–å†²çª**: å‡çº§æŸäº›åŒ…å¯èƒ½ä¼šå¼•èµ·ä¾èµ–å†²çªï¼Œå»ºè®®åœ¨å¹²å‡€çš„è™šæ‹Ÿç¯å¢ƒä¸­æµ‹è¯•
2. **CUDAç‰ˆæœ¬**: ç¡®ä¿CUDAç‰ˆæœ¬å…¼å®¹ï¼ˆéœ€è¦CUDA 11.3ï¼‰
3. **Pythonç‰ˆæœ¬**: å¿…é¡»ä½¿ç”¨Python 3.8
4. **æµ‹è¯•**: å‡çº§ååŠ¡å¿…æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯ï¼š
   - æ¨¡å‹åŠ è½½
   - GPUæ¨ç†
   - éŸ³é¢‘å¤„ç†
   - å›¾åƒå¤„ç†
   - Web APIæœåŠ¡

## ğŸ“… æŠ¥å‘Šç”Ÿæˆæ—¥æœŸ

2025-01-27

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `requirements.txt` - æ‚¨æä¾›çš„æ—§ç‰ˆæœ¬
- `requirements_0.txt` - ç›®æ ‡ç‰ˆæœ¬
- `check_environment.py` - ç¯å¢ƒæ£€æŸ¥è„šæœ¬
- `æ•°å­—äººDockerç‰ˆæœ¬æ¸…å•.md` - å®Œæ•´ç‰ˆæœ¬æ¸…å•

